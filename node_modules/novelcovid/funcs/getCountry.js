const fetch = require('node-fetch');

module.exports = async function(params) {
    if (!params.country) return await fetch(`https://corona.lmao.ninja/countries`).then(r=>r.json());
    else if (!params.country && params.sort) {
        let countries = await fetch(`https://corona.lmao.ninja/countries`).then(r=>r.json());
        countries = countries.sort((a, b) => a[params.sort] + b[params.sort]);
        countries = countries.map(x=>x);
        return countries;
    } else if (params.country) {
        try { return await fetch(`https://corona.lmao.ninja/countries/${params.country}`).then(r=>r.json()); } catch (e) { throw new TypeError("Country could not be found.") };
    }
}